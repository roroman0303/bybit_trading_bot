# Bybit ML Bot

–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ Bybit –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã**:  
- **–¢–µ—Å—Ç–æ–≤—ã–π (paper trading)** ‚Äî —ç–º—É–ª—è—Ü–∏—è —Å–¥–µ–ª–æ–∫ –±–µ–∑ —Ä–∏—Å–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤.  
- **–†–µ–∞–ª—å–Ω—ã–π (live trading)** ‚Äî —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ API Bybit —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏.  

–ò–º–µ–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π **–±—ç–∫—Ç–µ—Å—Ç–µ—Ä** —Å —É—á—ë—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π, –∞ —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bybit_ml_bot/
‚îú‚îÄ‚îÄ backtester/         # –ú–æ–¥—É–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ backtest.py     # –õ–æ–≥–∏–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ —Å–¥–µ–ª–æ–∫, TP/SL –ø–æ ATR, –∫–æ–º–∏—Å—Å–∏–∏, —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ metrics.py      # –ü–æ–¥—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ –∏ —Å–≤–æ–¥–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
‚îú‚îÄ‚îÄ ml/                 # –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ features.py     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ 20 —Ç–µ—Ö–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (EMA, RSI, Stoch, MACD, BB, ATR, ADX, CCI, MFI, OBV –∏ –¥—Ä.)
‚îÇ   ‚îú‚îÄ‚îÄ labeler.py      # –†–∞–∑–º–µ—Ç–∫–∞ –±—É–¥—É—â–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (–∫–ª–∞—Å—Å: -1, 0, +1) –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç—É –∏ ATR-–ø–æ—Ä–æ–≥—É
‚îÇ   ‚îî‚îÄ‚îÄ model.py        # –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è SGD + StandardScaler; —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ storage/            # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ   ‚îî‚îÄ‚îÄ db.py           # ORM-–º–æ–¥–µ–ª–∏: Order, Trade, Equity, State; –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏
‚îú‚îÄ‚îÄ trader/             # –õ–æ–≥–∏–∫–∞ –æ–Ω–ª–∞–π–Ω–æ–≤–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ exchange.py     # –û–±—ë—Ä—Ç–∫–∞ CCXT –¥–ª—è Bybit (testnet/mainnet), –∑–∞–≥—Ä—É–∑–∫–∞ OHLCV –∏ —Ä—ã–Ω–æ—á–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ broker.py       # –í—Ö–æ–¥ –ø–æ —Ä—ã–Ω–∫—É (hook –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–æ OCO TP/SL)
‚îÇ   ‚îú‚îÄ‚îÄ risk.py         # –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ ATR –∏ –¥–æ–ª–µ —Ä–∏—Å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ state.py        # KV-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –ë–î (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞)
‚îú‚îÄ‚îÄ scripts/            # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ preload_data.py # –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã CSV
‚îÇ   ‚îî‚îÄ‚îÄ train_offline.py# –ü—Ä–µ–¥–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ utils/              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ logging.py      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤ (Loguru)
‚îÇ   ‚îî‚îÄ‚îÄ timeframes.py   # –•–µ–ª–ø–µ—Ä—ã –ø–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º
‚îú‚îÄ‚îÄ docker/Dockerfile   # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
‚îú‚îÄ‚îÄ config.example.yaml # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ run_backtest.py     # –ó–∞–ø—É—Å–∫ –±—ç–∫—Ç–µ—Å—Ç–∞ –Ω–∞ CSV
‚îú‚îÄ‚îÄ run_paper.py        # –ë—É–º–∞–∂–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (—ç–º—É–ª—è—Ü–∏—è, –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤)
‚îú‚îÄ‚îÄ run_live.py         # –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (—á–µ—Ä–µ–∑ CCXT ‚Üí Bybit)
‚îî‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
cp config.example.yaml config.yaml
```

–í `config.yaml` —É–∫–∞–∂–∏—Ç–µ:
- `ccxt.apiKey` –∏ `ccxt.secret` ‚Äî –∫–ª—é—á–∏ Bybit (–¥–ª—è —Ç–µ—Å—Ç–æ–≤ `testnet: true`).
- `symbol`, `timeframe` ‚Äî —Ç–æ—Ä–≥–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `BTCUSDT`, `1h`).
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞: `risk_per_trade`, `tp_atr_mult`, `sl_atr_mult`, `prob_threshold`.
- –ö–æ–º–∏—Å—Å–∏–∏: `maker_fee`, `taker_fee`.
- –ü—É—Ç–∏: `paths.db_url`, `paths.models_dir`, `paths.logs_dir`.

---

## üìä –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

–û–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞:

```bash
python scripts/train_offline.py --config config.yaml --csv data/BTCUSDT_1H.csv --symbol BTCUSDT --timeframe 1h
```

–¢—Ä–µ–±—É–µ–º—ã–π CSV-—Ñ–æ—Ä–º–∞—Ç:
```
time,open,high,low,close,volume
```
- `time` ‚Äî ISO –∏–ª–∏ UNIX ms; –≤ –∫–æ–¥–µ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ –∏–Ω–¥–µ–∫—Å –≤—Ä–µ–º–µ–Ω–∏.

–ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `models/model_<SYMBOL>_<TF>.joblib` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è `run_paper.py`/`run_live.py`.

---

## üîç –ë—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫—Ç–µ—Å—Ç —Å —É—á—ë—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π –∏ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞:

```bash
python run_backtest.py --config config.yaml --csv data/BTCUSDT_1H.csv
```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –±—ç–∫—Ç–µ—Å—Ç–µ—Ä (`backtester/backtest.py`):
- –§–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏—á–∏ (20 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤) ‚Üí `ml/features.py`.
- –†–∞–∑–º–µ—á–∞–µ—Ç —Ü–µ–ª—å `y ‚àà {-1,0,1}` –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç—É `horizon_bars` –∏ –ø–æ—Ä–æ–≥—É –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR ‚Üí `ml/labeler.py`.
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –æ–±—É—á–∞–µ—Ç –º–æ–¥–µ–ª—å (SGD –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è) –Ω–∞ –ø—Ä–æ—à–ª—ã—Ö –±–∞—Ä–∞—Ö –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º.
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ `p(up)` –∏–ª–∏ `p(down)` ‚â• `prob_threshold`.
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç **TP/SL** –∫–∞–∫ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ ATR, PnL —Å **—É—á—ë—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π** (`taker_fee`/`maker_fee`).
- –í–µ–¥—ë—Ç —ç–º—É–ª—è—Ü–∏—é –¥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è TP/SL –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–∞ –ø–æ –±–∞—Ä–∞–º.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `storage/`:
- `trades_<symbol>_<tf>.csv` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫ (–≤—Ä–µ–º—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞, PnL, –∫–æ–º–∏—Å—Å–∏–∏).
- `equity_<symbol>_<tf>.csv` ‚Äî –∫—Ä–∏–≤–∞—è –∫–∞–ø–∏—Ç–∞–ª–∞.
- –¢–∞–∫–∂–µ –∑–∞–ø–∏—Å–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ SQLite (`paths.db_url`).

---

## üìù –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### 1) –ë—É–º–∞–∂–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (—ç–º—É–ª—è—Ü–∏—è)
```bash
python run_paper.py --config config.yaml --resume
```
- –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –º–æ–¥–µ–ª—å, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å.
- –û–±–Ω–æ–≤–ª—è–µ—Ç –º–æ–¥–µ–ª—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –ø–æ –º–µ—Ä–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –±–∞—Ä–æ–≤.
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–¥–µ–ª–∫–∏ –∏ equity –≤ –ë–î; –∫–ª—é—á `paper_state` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∑—é–º–∏—Ä–æ–≤–∞—Ç—å.

### 2) –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è
```bash
python run_live.py --config config.yaml --resume
```
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç CCXT –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä—ã–Ω–æ—á–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –Ω–∞ Bybit.
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –Ω–∞—á–∏–Ω–∞—Ç—å —Å `testnet: true` –∏ –º–∞–ª—ã–º–∏ –æ–±—ä—ë–º–∞–º–∏.

---

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

- SQLite –ø–æ –∞–¥—Ä–µ—Å—É –∏–∑ `paths.db_url` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `sqlite:///storage/trading.db`).  
- –¢–∞–±–ª–∏—Ü—ã: `orders`, `trades`, `equity`, `state` (KV –¥–ª—è —Ä–µ–∑—é–º–∞).
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å `--resume` –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–∞–ø–∏—Ç–∞–ª –∏–∑ `state`.

---

## ‚öñÔ∏è –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ –∫–æ–º–∏—Å—Å–∏–∏

- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ = `(equity * risk_per_trade) / (SL_ATR)`.  
- `SL_ATR = sl_atr_mult √ó ATR`, `TP_ATR = tp_atr_mult √ó ATR`.  
- –ö–æ–º–∏—Å—Å–∏–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏ –≤—ã—Ö–æ–¥–µ; –≤–ª–∏—è—è—é—Ç –Ω–∞ –∏—Ç–æ–≥–æ–≤—ã–π PnL.

---

## üñ•Ô∏è –°–µ—Ä–≤–µ—Ä –∏ Docker

**–ú–∏–Ω–∏–º—É–º:** 2 vCPU, 4 GB RAM, 20 GB SSD, Python 3.10+.  
Docker:
```bash
docker build -t bybit-ml-bot -f docker/Dockerfile .
docker run -it --rm -v $PWD:/app -w /app bybit-ml-bot python run_backtest.py --config config.yaml --csv data/BTCUSDT_1H.csv
```

---

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- –ù–∞—Ç–∏–≤–Ω—ã–µ OCO TP/SL –æ—Ä–¥–µ—Ä–∞ Bybit.
- –£—á—ë—Ç funding rate –∏ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è.
- –í–µ–±-–ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç—ã.
- Walk-forward –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –ø–æ–¥–±–æ—Ä `prob_threshold`.


## üöÄ –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è –∏ –±—ç–∫—Ç–µ—Å—Ç–∞

–ü–æ—Å–ª–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∏–ª–∏ –±—ç–∫—Ç–µ—Å—Ç –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

### –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
# –≤–∞—Ä–∏–∞–Ω—Ç 1: –∑–∞–ø—É—Å–∫ –Ω–∞–ø—Ä—è–º—É—é
python scripts/train_offline.py --config config.yaml --csv data/BTCUSDT_1H.csv --symbol BTCUSDT --timeframe 1h

# –≤–∞—Ä–∏–∞–Ω—Ç 2: –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç
python -m scripts.train_offline --config config.yaml --csv data/BTCUSDT_1H.csv --symbol BTCUSDT --timeframe 1h
```

### –ë—ç–∫—Ç–µ—Å—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
```bash
# –≤–∞—Ä–∏–∞–Ω—Ç 1: –∑–∞–ø—É—Å–∫ –Ω–∞–ø—Ä—è–º—É—é
python run_backtest.py --config config.yaml --csv data/BTCUSDT_1H.csv --symbol BTCUSDT --timeframe 1h

# –≤–∞—Ä–∏–∞–Ω—Ç 2: –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç
python -m run_backtest --config config.yaml --csv data/BTCUSDT_1H.csv --symbol BTCUSDT --timeframe 1h
```


## üìä –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ —Å Bybit –≤ CSV –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
python scripts/preload_data.py --symbol BTCUSDT --timeframe 60 --start 2023-01-01 --end 2023-12-31 --output data/BTCUSDT_1H.csv
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `--symbol` ‚Äî —Ç–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BTCUSDT)
- `--timeframe` ‚Äî —Ç–∞–π–º—Ñ—Ä–µ–π–º (1,3,5,15,30,60,240,D,M,W)
- `--start` ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD)
- `--end` ‚Äî –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD)
- `--output` ‚Äî –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞ CSV

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `train_offline.py` –∏ `run_backtest.py`.

---

## üìù Changelog

- **v0.1**: –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ –º–æ–¥—É–ª–∏ (–±–æ—Ç, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –±—ç–∫—Ç–µ—Å—Ç, –æ–±—É—á–µ–Ω–∏–µ).
- **v0.2**: –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `preload_data.py` –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å Bybit.
- **v0.2.1**: README —Ä–∞—Å—à–∏—Ä–µ–Ω –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –∑–∞–ø—É—Å–∫—É –±—ç–∫—Ç–µ—Å—Ç–∞/–æ–±—É—á–µ–Ω–∏—è.


## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API-–∫–ª—é—á–µ–π —á–µ—Ä–µ–∑ .env

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ API-–∫–ª—é—á–∏ –∏ –¥—Ä—É–≥–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞ `.env.example`) –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏:

```env
BYBIT_API_KEY=your_api_key
BYBIT_API_SECRET=your_api_secret
MODE=paper
```

- `MODE=paper` ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
- `MODE=real` ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è

–§–∞–π–ª `.env` **–Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ GitHub**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`.

---

## üìù Changelog

- **v0.3**: –î–æ–±–∞–≤–ª–µ–Ω `.env.example` –¥–ª—è –∫–ª—é—á–µ–π, `.gitignore`, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è python-dotenv. –¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ GitHub –±–µ–∑ —Ä–∏—Å–∫–∞ —É—Ç–µ—á–∫–∏ –∫–ª—é—á–µ–π.
